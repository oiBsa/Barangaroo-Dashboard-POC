{% load static %}
<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Boxicons -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <!-- My CSS -->
    <link rel="stylesheet" href="{% static 'admin/css/style.css' %}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-latest.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"
        integrity="sha512-SGWgwwRA8xZgEoKiex3UubkSkV1zSE1BS6O4pXcaxcNtUlQsOmOmhVnDwIvqGRfEmuz83tIGL13cXMZn6upPyg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.js"></script>
    <title>Dashboard Overview</title>
</head>

<body id="meterPage">


    <!-- SIDEBAR -->
    <section id="sidebar" class="hide">
        <a href="#" class="brand">
            <img class="oi-icon"
                src="https://media-exp1.licdn.com/dms/image/C560BAQEAPjKix24H5A/company-logo_200_200/0/1574388135440?e=1672272000&v=beta&t=SBjMJWO6LihSvjdzM88Lvk15riwX8TkLhz_SNQhDWDw"
                alt="Operational Interlligence">
            <span class="text">Operational Interlligence</span>
        </a>
        <ul class="side-menu top">
            <li>
                <a href="{% url 'ems_dashboard' %}">
                    <i class='bx bxs-dashboard'></i>
                    <span class="text">Overview</span>
                </a>
            </li>
            <li>
                <a href="{% url 'ems' %}">
                    <i class='bx bx-bolt-circle'></i>
                    <span class="text">Electric Meters</span>
                </a>
            </li>
            <li>
                <a href="{% url 'water' %}">
                    <i class='bx bx-water'></i>
                    <span class="text">Water Meter</span>
                </a>
            </li>
            <li>
                <a href="{% url 'gas' %}">
                    <i class='bx bxs-hot'></i>
                    <span class="text">Gas Meter</span>
                </a>
            </li>
            <li>
                <a href="{% url 'thermal' %}">
                    <i class='bx bxs-droplet'></i>
                    <span class="text">Thermal Meter</span>
                </a>
            </li>
        </ul>
    </section>
    <!-- SIDEBAR -->



    <!-- CONTENT -->
    <section id="content">
        <!-- NAVBAR -->
        <nav>
            <a href="#" class="nav-link">Electric Meter Details</a>
            <form action="#">
                <div class="form-input" style="align-content: right;">
                    <input type="search" placeholder="Search meter">
                    <button type="submit" class="search-btn">
                        <i class='bx bx-search'></i>
                    </button>
                </div>
            </form>
        </nav>
        <!-- NAVBAR -->

        <!-- MAIN -->
        <main>
            <!-- Meter Heading Container -->
            <div style="display: flex-column; text-align:center;" id="meterHeading">
                <div>
                    <p id="meterName">PS-B-ELE-L03-EM001</p>
                </div>
                <div>
                    <p id="meterDescription">PS-B-ELE-L03-EM001 EMS Lighting</p>
                </div>
                <div>
                    <p id="meterSerial">Serial</p>
                </div>
            </div>

            <!-- Gauges Container -->
            <div style="display: flex-row;">
                <ul id="meterGauges">
                    <li id="lineVoltageA">
                        <span class="text">
                            <p>Line<br>Voltage (A)</p>
                        </span>
                        <div id="v-line"></div>
                        <div id="gauge">
                            <div id="minor-ticks-bottom-mask"></div>
                            <div id="bottom-circle"></div>
                            <svg version="1.1" baseProfile="full" width="160" height="160"
                                xmlns="http://www.w3.org/2000/svg">
                                <linearGradient id="gradient" x1="0" x2="1" y1="0" y2="1">
                                    <stop offset="0%" stop-color="#FDE9F5" />
                                    <stop offset="100%" stop-color="#9ea1ff" />
                                </linearGradient>
                                <path id="lineVoltageAArc" stroke=url(#gradient) fill="none" stroke-width="10"
                                    stroke-linecap="round" />
                            </svg>
                            <div id="center-circle">
                                <span class="gaugeValue">232</span>
                            </div>
                        </div>
                        <div id="v-line"></div>
                        <span class="gaugeUnit">
                            <p>(V)</p>
                        </span>
                    </li>
                    <li>
                        <span class="text" id="lineVoltageB">
                            <p>Line<br>Voltage (B)</p>
                        </span>
                        <div id="v-line"></div>
                        <div id="gauge">
                            <div id="minor-ticks-bottom-mask"></div>
                            <div id="bottom-circle"></div>
                            <svg version="1.1" baseProfile="full" width="160" height="160"
                                xmlns="http://www.w3.org/2000/svg">
                                <path id="lineVoltageBArc" stroke=url(#gradient) fill="none" stroke-width="10"
                                    stroke-linecap="round" />
                            </svg>
                            <div id="center-circle">
                                <span class="gaugeValue">234</span>
                            </div>
                        </div>
                        <div id="v-line"></div>
                        <span class="gaugeUnit">
                            <p>(V)</p>
                        </span>
                    </li>
                    <li>
                        <span class="text" id="lineVoltageC">
                            <p>Line<br>Voltage (C)</p>
                        </span>
                        <div id="v-line"></div>
                        <div id="gauge">
                            <svg version="1.1" baseProfile="full" width="160" height="160"
                                xmlns="http://www.w3.org/2000/svg">

                                <path id="lineVoltageCArc" stroke=url(#gradient) fill="none" stroke-width="10"
                                    stroke-linecap="round" />
                            </svg>
                            <div id="center-circle">
                                <span class="gaugeValue">225</span>
                            </div>

                        </div>
                        <div id="v-line"></div>
                        <span class="gaugeUnit">
                            <p>(V)</p>
                        </span>
                    </li>
                    <li>
                        <span class="text" id="totalLineVoltage">
                            <p>Total<br>Line Voltage</p>
                        </span>
                        <div id="v-line"></div>
                        <div id="gauge">
                            <svg version="1.1" baseProfile="full" width="160" height="160"
                                xmlns="http://www.w3.org/2000/svg">
                                <path id="totalLineVoltageArc" stroke=url(#gradient) fill="none" stroke-width="10"
                                    stroke-linecap="round" />
                            </svg>
                            <div id="center-circle">
                                <span class="gaugeValue">222</span>
                            </div>

                        </div>
                        <div id="v-line"></div>
                        <span class="gaugeUnit">
                            <p>(V)</p>
                        </span>
                    </li>
                    <li>
                        <span class="text" id="totalPhaseVoltage">
                            <p>Total<br>Phase Voltage</p>
                        </span>
                        <div id="v-line"></div>
                        <div id="gauge">
                            <svg version="1.1" baseProfile="full" width="160" height="160"
                                xmlns="http://www.w3.org/2000/svg">
                                <path id="totalPhaseVoltageArc" stroke=url(#gradient) fill="none" stroke-width="10"
                                    stroke-linecap="round" />
                            </svg>
                            <div id="center-circle">
                                <span id="totalPwerValue" class="gaugeValue">241</span>
                            </div>

                        </div>
                        <div id="v-line"></div>
                        <span class="gaugeUnit" id="totalPhaseVoltageUnit">
                            <p>(V)</p>
                        </span>
                    </li>
                    <li>
                        <span class="text" id="totalCurent">
                            <p>Total<br>Current</p>
                        </span>
                        <div id="v-line"></div>
                        <div id="gauge">
                            <svg version="1.1" baseProfile="full" width="160" height="160"
                                xmlns="http://www.w3.org/2000/svg">
                                <path id="totalCurentArc" stroke=url(#gradient) fill="none" stroke-width="10"
                                    stroke-linecap="round" />
                            </svg>
                            <div id="center-circle">
                                <span id="totalCurentValue" class="gaugeValue">10</span>
                            </div>

                        </div>
                        <div id="v-line"></div>
                        <span class="gaugeUnit" id="totalCurentUnit">
                            <p>(A)</p>
                        </span>
                    </li>
                    <li>
                        <span class="text" id="totalPowerFactor">
                            <p>Total<br>Power Factor</p>
                        </span>
                        <div id="v-line"></div>
                        <div id="gauge">
                            <svg version="1.1" baseProfile="full" width="160" height="160"
                                xmlns="http://www.w3.org/2000/svg">

                                <path id="totalPowerFactorArc" stroke=url(#gradient) fill="none" stroke-width="10"
                                    stroke-linecap="round" />
                            </svg>
                            <div id="center-circle">
                                <span id="totalPowerFactorValue" class="gaugeValue">0.98</span>
                            </div>

                        </div>
                        <div id="v-line"></div>
                        <span class="gaugeUnit" id="totalPowerFactorUnit">
                            <p>(PF)</p>
                        </span>
                    </li>
                    <li>
                        <span class="text" id="totalApparentPower">
                            <p>Total<br>Apparent Power</p>
                        </span>
                        <div id="v-line"></div>
                        <div id="gauge">
                            <svg version="1.1" baseProfile="full" width="160" height="160"
                                xmlns="http://www.w3.org/2000/svg">

                                <path id="totalApparentPowerArc" stroke=url(#gradient) fill="none" stroke-width="10"
                                    stroke-linecap="round" />
                            </svg>
                            <div id="center-circle">
                                <span id="totalApparentPowerValue" class="gaugeValue">250</span>
                            </div>
                        </div>
                        <div id="v-line"></div>
                        <span class="gaugeUnit" id="totalApparentPowerUnit">
                            <h4>(kVA)</h4>
                        </span>
                    </li>
                    <li>
                        <span class="text" id="totalReactivePower">
                            <p>Total<br>Reactive Power</p>
                        </span>
                        <div id="v-line"></div>
                        <div id="gauge">
                            <svg version="1.1" baseProfile="full" width="160" height="160"
                                xmlns="http://www.w3.org/2000/svg">

                                <path id="totalReactivePowerArc" stroke=url(#gradient) fill="none" stroke-width="10"
                                    stroke-linecap="round" />
                            </svg>
                            <div id="center-circle">
                                <span id="totalReactivePowerValue" class="gaugeValue">50</span>
                            </div>
                        </div>
                        <div id="v-line"></div>
                        <span class="gaugeUnit" id="totalReactivePowerUnit">
                            <p>(kVAr)</p>
                        </span>
                    </li>
                </ul>
            </div>

            <!-- Line Voltage -->
            <div>
                <ul id="lineVoltage">
                    <li>
                        <div id="lineContainer">
                            <div class="phaseVoltage">
                                <p id="phaseVoltageA">Total Consumption</p>
                            </div>
                            <div class="phaseVoltage">
                                <p id="phaseVoltageA">(kWh)</p>
                            </div>
                            <div id="gauge" class="center-gauge">
                                <svg version="1.1" baseProfile="full" width="160" height="160"
                                    xmlns="http://www.w3.org/2000/svg">

                                    <path id="totalConsumptionGauge" stroke=url(#gradient) fill="none" stroke-width="10"
                                        stroke-linecap="round" />
                                </svg>
                                <div id="center-circle2">
                                    <span id="totalReactivePowerValue" class="gaugeValue">1250</span>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div id="lineContainer">
                            <div class="phaseVoltage">
                                <p id="phaseVoltageA">Total Power</p>
                            </div>
                            <div class="phaseVoltage">
                                <p id="phaseVoltageA">(kW)</p>
                            </div>
                            <div id="gauge" class="center-gauge">
                                <svg version="1.1" baseProfile="full" width="160" height="160"
                                    xmlns="http://www.w3.org/2000/svg">

                                    <path id="totalPowerGauge" stroke=url(#gradient) fill="none" stroke-width="10"
                                        stroke-linecap="round" />
                                </svg>
                                <div id="center-circle2">
                                    <span id="totalReactivePowerValue" class="gaugeValue">140</span>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div id="lineContainer">
                            <div class="phaseVoltage">
                                <p id="phaseVoltageA">Total Frequency</p>
                            </div>
                            <div class="phaseVoltage">
                                <p id="phaseVoltageA">(Hz)</p>
                            </div>
                            <div id="gauge" class="center-gauge">
                                <svg version="1.1" baseProfile="full" width="160" height="160"
                                    xmlns="http://www.w3.org/2000/svg">

                                    <path id="totalFrequencyGauge" stroke=url(#gradient) fill="none" stroke-width="10"
                                        stroke-linecap="round" />
                                </svg>
                                <div id="center-circle2">
                                    <span id="totalReactivePowerValue" class="gaugeValue">50</span>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Details -->
            <div>
                <ul id="details" style="vertical-align: top;">
                    <li id="phase1">
                        <h4>Phase A</h4>
                        <div style="display: flex-row;">
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Voltage
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    245 V
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Current
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    215.12 A
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Voltage (THD)
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    Voltage
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Current (THD)
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    Voltage
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Power
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    50.45
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Power Factor
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    0.99
                                </div>
                            </div>
                        </div>
                    </li>
                    <li id="phase2">
                        <h4>Phase B</h4>
                        <div style="display: flex-row;">
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Voltage
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    245 V
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Current
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    215.12 A
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px; display:flex-row;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Voltage (THD)
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    Voltage
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Current (THD)
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    Voltage
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Power
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    50.45
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Power Factor
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    0.99
                                </div>
                            </div>
                        </div>
                    </li>
                    <li id="phase3">
                        <h4>Phase C</h4>
                        <div style="display: flex-row;">
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Voltage
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    245 V
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Current
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    215.12 A
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Voltage (THD)
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    Voltage
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Current (THD)
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    Voltage
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Power
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    50.45
                                </div>
                            </div>
                            <div style="padding-left: 20px; padding-bottom:10px;">
                                <div id="phaseVoltageC" class="detail phaseVoltage"
                                    style="float: left; width:50%; margin-bottom:5px;">
                                    Power Factor
                                </div>
                                <div id="guagePVC" style="text-align: center; margin-bottom:5px;">
                                    0.99
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Graph -->
            <div class="graphContainer">
                <div style="display: flex;" class="graphBoxHeader">
                    <h4 id="meterName" href="./index.html" style="color: black;">PS-B-ELE-L03-EM001</h4>


                    <div style="margin-left: auto;">
                        <label for="startDate" style="font-family: Lato, sans-serif;">Start</label>
                        <input type="datetime-local" id="startDate" name="Start Date" value="2022-08-28 00:00:00">
                    </div>
                    <div>
                        <label for="ebdDate" style="font-family: Lato, sans-serif;">End</label>
                        <input type="datetime-local" id="endDate" name="End Date" value="2022-09-28 00:00:00">
                    </div>
                    <div>
                        <div class="dropdown">
                            <button class="dropbtn" id='dropdown-button'>Type</button>
                            <div class="dropdown-content">
                                <option href="#" value="1" onclick="jsFunction(this.value);">Bar</option>
                                <option href="#" value="2" onclick="jsFunction(this.value);">Line</option>
                                <option href="#" value="3" onclick="jsFunction(this.value);">Pie</option>
                                <option href="#" value="4" onclick="jsFunction(this.value);">Ring</option>
                                <option href="#" value="5" onclick="jsFunction(this.value);">Scatter</option>
                                <option href="#" value="6" onclick="jsFunction(this.value);">Bubble</option>
                                <option href="#" value="7" onclick="jsFunction(this.value);">NABLES</option>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Graph -->
                <div style="display: flex; margin-top:10px; font-family: Lato, sans-serif; margin-bottom:55px">
                    <div style="font-family: Lato, sans-serif; margin-bottom:20px;" id="meterDescription">
                        <p>Total consumption</p>
                    </div>

                    <div style="margin-left: auto; margin-right: 20px;" class="graphButtons">
                        <button type="button" class="btn btn-outline-primary enable" id="todayButton">Today</button>
                    </div>
                    <div style="margin-right: 20px;" class="graphButtons">
                        <button type="button" class="btn btn-outline-primary enable" id="weeklyButton">Weekly</button>
                    </div>
                    <div style="margin-right: 20px;" class="graphButtons">
                        <button type="button" class="btn btn-outline-primary enable">Monthly</button>
                    </div>
                    <div style="margin-right: 20px;" class="graphButtons">
                        <button type="button" class="btn btn-outline-primary enable">Yearly</button>
                    </div>
                    <div class="vertical" style="margin-right: 20px; 
                                                        border-left: 2px solid black; 
                                                        height:32px;
                                                        "></div>
                    <div class="graphButtons">
                        <button type="button" class="btn btn-outline-primary">Report</button>
                    </div>

                </div>
                <canvas id="meterGraph" style="max-height: 600px; margin-bottom:30px;" class="graph">

                </canvas>
            </div>


        </main>
        <!-- MAIN -->
    </section>
    <!-- CONTENT -->


    <script src="{% static 'admin/js/script.js' %}"></script>
    <script>
        var todayButton = document.getElementById("todayButton");
        var weeklyButton = document.getElementById("weeklyButton")
        var maxVoltage = 260;
        var minVoltage = 0;
        var voltageA = 221;
        var voltageB = 234;
        var voltageC = 229;
        var currentVoltageA = 2599;
        var currentVoltageB = 140;
        var currentVoltageC = 150;
        var needleA = document.getElementById("needleA");
        var value = (currentVoltageA / maxVoltage) * 100;
        degA = -90 + (value * 177.5) / 100;
        var needleB = document.getElementById("needleB");
        var value = (currentVoltageB / maxVoltage) * 100;
        degB = -90 + (value * 177.5) / 100;
        var needleC = document.getElementById("needleC");
        var value = (currentVoltageC / maxVoltage) * 100;
        degC = -90 + (value * 177.5) / 100;

        var showData = 1;
        var meterName = document.getElementById("meterName");
        var meterDescription = document.getElementById('meterDescription');
        var xValues = ['January', 'Feburary', 'March', 'April', 'May', 'June',
            'July', 'Augest', 'September', 'October', 'November', 'December'];
        var yValues = [1100, 800, 400, 700, 300, 950, 880, 650, 600, 600, 990, 1000];
        var x1 = ['3:00 AM', '3:15 AM', '3:30 AM', '3:45 AM', '4:00 AM', '4:15 AM', '4:30 AM', '4:45 AM', '5:00 AM', '5:15 AM', '5:30 AM', '5:45 AM', '6:00 AM', '6:15 AM', '6:30 AM', '6:45 AM', '7:00 AM', '7:15 AM', '7:30 AM', '7:45 AM', '8:00 AM', '8:15 AM', '8:30 AM', '8:45 AM', '9:00 AM', '9:15 AM', '9:30 AM', '9:45 AM', '10:00 AM', '10:15 AM', '10:30 AM', '10:45 AM', '11:00 AM', '11:15 AM', '11:30 AM', '11:45 AM', '12:00 PM', '12:15 PM', '12:30 PM', '12:45 PM', '1:00 PM', '1:15 PM', '1:30 PM', '1:45 PM', '2:00 PM', '2:15 PM', '2:30 PM', '2:45 PM', '3:00 PM', '3:15 PM'];
        var y1 = [86493.1875, 86525.953125, 86495.234375, 86018.046875, 86026.2421875, 86519.8046875, 86521.859375, 86054.9140625, 86054.9140625, 86077.4375, 86042.625, 86073.34375, 86054.9140625, 86478.8515625, 86026.2421875, 86517.7578125, 86077.4375, 86523.90625, 86036.4765625, 86046.71875, 86026.2421875, 86497.28125, 86069.25, 86056.9609375, 86026.2421875, 86077.4375, 86489.0859375, 86497.28125, 86480.8984375, 86444.03125, 86521.859375, 86482.9453125, 86497.28125, 86036.4765625, 86472.703125, 86476.796875, 86071.296875, 86484.9921875, 86513.6640625, 86507.5234375, 86484.9921875, 86462.4609375, 86489.0859375, 86482.9453125, 86548.4765625, 86616.0625, 86583.296875, 86996.9921875, 86558.71875, 87009.28125, 86562.8125, 86589.4375, 86982.65625, 86560.765625, 86616.0625, 86583.296875, 86988.796875, 86937.6015625, 87003.1328125, 87025.6640625, 86589.4375, 86597.6328125, 87083.0078125, 87498.75, 87098.640625, 87126.875, 87156.3984375, 87185.6796875, 87213.7578125, 87242.796875, 87270.796875, 87299.6796875, 87318.3203125, 87336, 87337.4375, 87337.515625];
        var colorList = [];

        var ctx = document.getElementById('meterGraph').getContext('2d');
        var chartConfig = {
            type: 'bar',
            data: {
                labels: xValues,
                datasets: [{
                    label: 'Consumption',
                    data: [490, 490, 470, 420, 420, 280, 290, 320, 230, 220, 0, 0],
                    borderWidth: 1,
                    borderColor: 'rgba(0, 0, 0, 1)',
                    backgroundColor: "#dbfafa",
                    tension: 0.2,
                    borderRadius: 8,
                    type: 'bar',
                    order: 1
                }],

            },
            options: {

                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                responsive: true,
            }

        };
        var dataset1 = [{
            label: 'Consumption',
            data: [490, 490, 470, 420, 420, 280, 290, 320, 230, 220, 0, 0],
            borderWidth: 1,
            borderColor: 'rgba(0, 0, 0, 1)',
            backgroundColor: "#dbfafa",
            tension: 0.2,
            borderRadius: 8,
            order: 1
        }];
        var dataset2 = [{
            label: 'Consumption',
            data: [490, 490, 470, 420, 420, 280, 290, 320, 230, 220, 0, 0],
            borderWidth: 1,
            borderColor: 'rgba(0, 0, 0, 1)',
            backgroundColor: "#dbfafa",
            tension: 1,
            borderRadius: 8,
            type: 'bar',
            order: 1
        },
        {
            label: '6.0',
            data: [400, 370, 320, 290, 250, 220, 215, 220, 210, 210],
            borderWidth: 2,
            borderColor: '#8a70b2',
            backgroundColor: "#C6A0FF",
            tension: 0.5,
            borderRadius: 8,
            type: 'line'
        },
        {
            label: '5.5',
            data: [500, 460, 410, 360, 320, 300, 295, 300, 290, 290],
            borderWidth: 2,
            borderColor: '#52A98C',
            backgroundColor: "#52A98C",
            tension: 0.5,
            borderRadius: 8,
            type: 'line'
        },
        {
            label: '5.0',
            data: [600, 550, 500, 430, 380, 350, 345, 350, 340, 340],
            borderWidth: 2,
            borderColor: '#8785C7',
            backgroundColor: "#8785C7",
            tension: 0.5,
            borderRadius: 8,
            type: 'line'
        },
        {
            label: '4.5',
            data: [800, 750, 650, 560, 505, 490, 485, 490, 480, 480],
            borderWidth: 2,
            borderColor: '#C6D9E3',
            backgroundColor: "#C6D9E3",
            tension: 0.4,
            borderRadius: 8,
            type: 'line'
        }];
        var Chart1 = new Chart(ctx, chartConfig);


        function selectedRow() {

            var index, table = document.getElementById("meterTable");
            for (var i = 1; i < table.rows.length; i++) {
                table.rows[i].onclick = function () {
                    // remove the background from the previous selected row
                    if (typeof index !== "undefined") {
                        table.rows[index].classList.toggle("selected");
                    }
                    // get the selected row index
                    index = this.rowIndex;
                    // add class selected to the row
                    this.classList.toggle("selected");
                    if (index <= 3) {
                        if (index == 1) {
                            chartConfig.data.labels = x1;
                            chartConfig.data.datasets[0].data = y1;
                            meterName.innerHTML = 'PS-B-ELE-L03-EM001';
                            meterDescription.innerHTML = 'PS-B-ELE-L03-EM001 EMS Lighting'
                        } else if (index == 2) {
                            meterName.innerHTML = 'PS-B-ELE-L03-EM002';
                            meterDescription.innerHTML = 'PS-B-ELE-L03-EM002 EMS Power'
                        }
                        else if (index == 3) {
                            meterName.innerHTML = 'PS-B-ELE-L03-EM003';
                            meterDescription.innerHTML = 'PS-B-ELE-L03-EM003 EMS Lighting'
                        }
                        chartConfig.options.scales.y.beginAtZero = false;
                        Chart1.update('active');
                    } else {
                        meterName.innerHTML = 'EMS';
                        meterDescription.innerHTML = 'Total consuption of all meters';
                        chartConfig.options.scales.y.beginAtZero = true;
                        chartConfig.data.labels = xValues;
                        chartConfig.data.datasets[0].data = yValues;
                        Chart1.update('active');
                    }
                };
            }

        }
        function jsFunction(value) {
            if (value == 1) {
                chartConfig.type = 'bar';
            } else if (value == 2) {
                if (todayButton.classList.contains("disable")){
                    todayButton.classList.remove("disable");
                    weeklyButton.classList.remove("disable");
                }
                if (todayButton.classList.contains("enable")==false){
                    todayButton.classList.add("enable");
                    weeklyButton.classList.add("enable");
                }
                chartConfig.data.datasets = dataset1;
                chartConfig.type = 'line';
            } else if (value == 3) {
                if (todayButton.classList.contains("disable")){
                    todayButton.classList.remove("disable");
                    weeklyButton.classList.remove("disable");
                }
                if (todayButton.classList.contains("enable")==false){
                    todayButton.classList.add("enable");
                    weeklyButton.classList.add("enable");
                }
                chartConfig.data.datasets = dataset1;
                chartConfig.type = 'pie';
            } else if (value == 4) {
                if (todayButton.classList.contains("disable")){
                    todayButton.classList.remove("disable");
                    weeklyButton.classList.remove("disable");
                }
                if (todayButton.classList.contains("enable")==false){
                    todayButton.classList.add("enable");
                    weeklyButton.classList.add("enable");
                }
                chartConfig.data.datasets = dataset1;
                chartConfig.type = 'doughnut';
            } else if (value == 5) {
                if (todayButton.classList.contains("disable")){
                    todayButton.classList.remove("disable");
                    weeklyButton.classList.remove("disable");
                }
                if (todayButton.classList.contains("enable")==false){
                    todayButton.classList.add("enable");
                    weeklyButton.classList.add("enable");
                }
                chartConfig.data.datasets = dataset1;
                chartConfig.type = 'scatter';
            } else if (value == 6) {
                if (todayButton.classList.contains("disable")){
                    todayButton.classList.remove("disable");
                    weeklyButton.classList.remove("disable");
                }
                if (todayButton.classList.contains("enable")==false){
                    todayButton.classList.add("enable");
                    weeklyButton.classList.add("enable");
                }
                chartConfig.data.datasets = dataset1;
                chartConfig.type = 'bubble';
            } else if (value == 7) {
                if (todayButton.classList.contains("enable")){
                    todayButton.classList.remove("enable");
                    weeklyButton.classList.remove("enable");
                }
                if (todayButton.classList.contains("disable")==false){
                    todayButton.classList.add("disable");
                    weeklyButton.classList.add("disable");
                }
                chartConfig.data.datasets = dataset2;
            }

            Chart1.update('active');
        };


        function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
            var angleInRadians = (angleInDegrees - 180) * Math.PI / 180;

            return {
                x: centerX + (radius * Math.cos(angleInRadians)),
                y: centerY + (radius * Math.sin(angleInRadians))
            };
        }


        function describeArc(x, y, radius, startAngle, endAngle) {

            var start = polarToCartesian(x, y, radius, endAngle);
            var end = polarToCartesian(x, y, radius, startAngle);

            var largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";

            var d = [
                "M", start.x, start.y,
                "A", radius, radius, 0, largeArcFlag, 0, end.x, end.y
            ].join(" ");

            return d;
        }
        document.getElementById("lineVoltageAArc").setAttribute("d", describeArc(80, 80, 65, 0, 359));
        document.getElementById("lineVoltageBArc").setAttribute("d", describeArc(80, 80, 65, 0, 359));
        document.getElementById("lineVoltageCArc").setAttribute("d", describeArc(80, 80, 65, 0, 359));
        document.getElementById("totalLineVoltageArc").setAttribute("d", describeArc(80, 80, 65, 0, 359));
        document.getElementById("totalCurentArc").setAttribute("d", describeArc(80, 80, 65, 0, 359));
        document.getElementById("totalPowerFactorArc").setAttribute("d", describeArc(80, 80, 65, 0, 359));
        document.getElementById("totalPhaseVoltageArc").setAttribute("d", describeArc(80, 80, 65, 0, 359));
        document.getElementById("totalApparentPowerArc").setAttribute("d", describeArc(80, 80, 65, 0, 359));
        document.getElementById("totalReactivePowerArc").setAttribute("d", describeArc(80, 80, 65, 0, 359));
        document.getElementById("totalConsumptionGauge").setAttribute("d", describeArc(80, 80, 65, 0, 359));
        document.getElementById("totalPowerGauge").setAttribute("d", describeArc(80, 80, 65, 0, 359));
        document.getElementById("totalFrequencyGauge").setAttribute("d", describeArc(80, 80, 65, 0, 359));



        needleA.style.transition = "2s 0.5s ease-in-out"
        needleB.style.transition = "2s 0.5s ease-in-out"
        needleC.style.transition = "2s 0.5s ease-in-out"
        needleA.style.transform = 'rotate(' + 90 + 'deg)';
        needleB.style.transform = 'rotate(' + 90 + 'deg)';
        needleC.style.transform = 'rotate(' + 90 + 'deg)';

        $('.gaugeValue').each(function () {
            $(this).prop('Counter', 0).animate({
                Counter: $(this).text()
            }, {
                duration: 1500,
                easing: 'swing',
                step: function (now) {
                    $(this).text(Math.ceil(now));
                }
            });
        });

    </script>
</body>

</html>